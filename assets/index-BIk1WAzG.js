import{q as le,r as Z,k as ie,o as ce,f as de,I as w,Q as d,P as j,y as fe,Y as he,$ as te,V as ve,K as G,m as ne,u as me,F as pe,_ as ge,O as oe,J as C,M as $e}from"./vue-CItE1nfi.js";import{i as ye}from"./index-C329vRR8.js";import{_ as Me}from"./_plugin-vue_export-helper-DlAUqK2U.js";var X={exports:{}},De=X.exports,ue;function _e(){return ue||(ue=1,(function(K,L){(function(y,D){K.exports=D()})(De,(function(){var y=1e3,D=6e4,U=36e5,T="millisecond",x="second",Y="minute",H="hour",b="day",z="week",M="month",A="quarter",k="year",O="date",J="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,r=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var n=["th","st","nd","rd"],e=a%100;return"["+a+(n[(e-20)%10]||n[e]||n[0])+"]"}},S=function(a,n,e){var s=String(a);return!s||s.length>=n?a:""+Array(n+1-s.length).join(e)+a},u={s:S,z:function(a){var n=-a.utcOffset(),e=Math.abs(n),s=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+S(s,2,"0")+":"+S(t,2,"0")},m:function a(n,e){if(n.date()<e.date())return-a(e,n);var s=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(s,M),i=e-t<0,o=n.clone().add(s+(i?-1:1),M);return+(-(s+(e-t)/(i?t-o:o-t))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M,y:k,w:z,d:b,D:O,h:H,m:Y,s:x,ms:T,Q:A}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},W="en",F={};F[W]=g;var ae="$isDayjsObject",ee=function(a){return a instanceof Q||!(!a||!a[ae])},P=function a(n,e,s){var t;if(!n)return W;if(typeof n=="string"){var i=n.toLowerCase();F[i]&&(t=i),e&&(F[i]=e,t=i);var o=n.split("-");if(!t&&o.length>1)return a(o[0])}else{var c=n.name;F[c]=n,t=c}return!s&&t&&(W=t),t||!s&&W},v=function(a,n){if(ee(a))return a.clone();var e=typeof n=="object"?n:{};return e.date=a,e.args=arguments,new Q(e)},l=u;l.l=P,l.i=ee,l.w=function(a,n){return v(a,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var Q=(function(){function a(e){this.$L=P(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[ae]=!0}var n=a.prototype;return n.parse=function(e){this.$d=(function(s){var t=s.date,i=s.utc;if(t===null)return new Date(NaN);if(l.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var o=t.match(h);if(o){var c=o[2]-1||0,f=(o[7]||"0").substring(0,3);return i?new Date(Date.UTC(o[1],c,o[3]||1,o[4]||0,o[5]||0,o[6]||0,f)):new Date(o[1],c,o[3]||1,o[4]||0,o[5]||0,o[6]||0,f)}}return new Date(t)})(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return l},n.isValid=function(){return this.$d.toString()!==J},n.isSame=function(e,s){var t=v(e);return this.startOf(s)<=t&&t<=this.endOf(s)},n.isAfter=function(e,s){return v(e)<this.startOf(s)},n.isBefore=function(e,s){return this.endOf(s)<v(e)},n.$g=function(e,s,t){return l.u(e)?this[s]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,s){var t=this,i=!!l.u(s)||s,o=l.p(e),c=function(V,$){var I=l.w(t.$u?Date.UTC(t.$y,$,V):new Date(t.$y,$,V),t);return i?I:I.endOf(b)},f=function(V,$){return l.w(t.toDate()[V].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice($)),t)},m=this.$W,p=this.$M,_=this.$D,E="set"+(this.$u?"UTC":"");switch(o){case k:return i?c(1,0):c(31,11);case M:return i?c(1,p):c(0,p+1);case z:var N=this.$locale().weekStart||0,q=(m<N?m+7:m)-N;return c(i?_-q:_+(6-q),p);case b:case O:return f(E+"Hours",0);case H:return f(E+"Minutes",1);case Y:return f(E+"Seconds",2);case x:return f(E+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,s){var t,i=l.p(e),o="set"+(this.$u?"UTC":""),c=(t={},t[b]=o+"Date",t[O]=o+"Date",t[M]=o+"Month",t[k]=o+"FullYear",t[H]=o+"Hours",t[Y]=o+"Minutes",t[x]=o+"Seconds",t[T]=o+"Milliseconds",t)[i],f=i===b?this.$D+(s-this.$W):s;if(i===M||i===k){var m=this.clone().set(O,1);m.$d[c](f),m.init(),this.$d=m.set(O,Math.min(this.$D,m.daysInMonth())).$d}else c&&this.$d[c](f);return this.init(),this},n.set=function(e,s){return this.clone().$set(e,s)},n.get=function(e){return this[l.p(e)]()},n.add=function(e,s){var t,i=this;e=Number(e);var o=l.p(s),c=function(p){var _=v(i);return l.w(_.date(_.date()+Math.round(p*e)),i)};if(o===M)return this.set(M,this.$M+e);if(o===k)return this.set(k,this.$y+e);if(o===b)return c(1);if(o===z)return c(7);var f=(t={},t[Y]=D,t[H]=U,t[x]=y,t)[o]||1,m=this.$d.getTime()+e*f;return l.w(m,this)},n.subtract=function(e,s){return this.add(-1*e,s)},n.format=function(e){var s=this,t=this.$locale();if(!this.isValid())return t.invalidDate||J;var i=e||"YYYY-MM-DDTHH:mm:ssZ",o=l.z(this),c=this.$H,f=this.$m,m=this.$M,p=t.weekdays,_=t.months,E=t.meridiem,N=function($,I,B,R){return $&&($[I]||$(s,i))||B[I].slice(0,R)},q=function($){return l.s(c%12||12,$,"0")},V=E||function($,I,B){var R=$<12?"AM":"PM";return B?R.toLowerCase():R};return i.replace(r,(function($,I){return I||(function(B){switch(B){case"YY":return String(s.$y).slice(-2);case"YYYY":return l.s(s.$y,4,"0");case"M":return m+1;case"MM":return l.s(m+1,2,"0");case"MMM":return N(t.monthsShort,m,_,3);case"MMMM":return N(_,m);case"D":return s.$D;case"DD":return l.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return N(t.weekdaysMin,s.$W,p,2);case"ddd":return N(t.weekdaysShort,s.$W,p,3);case"dddd":return p[s.$W];case"H":return String(c);case"HH":return l.s(c,2,"0");case"h":return q(1);case"hh":return q(2);case"a":return V(c,f,!0);case"A":return V(c,f,!1);case"m":return String(f);case"mm":return l.s(f,2,"0");case"s":return String(s.$s);case"ss":return l.s(s.$s,2,"0");case"SSS":return l.s(s.$ms,3,"0");case"Z":return o}return null})($)||o.replace(":","")}))},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,s,t){var i,o=this,c=l.p(s),f=v(e),m=(f.utcOffset()-this.utcOffset())*D,p=this-f,_=function(){return l.m(o,f)};switch(c){case k:i=_()/12;break;case M:i=_();break;case A:i=_()/3;break;case z:i=(p-m)/6048e5;break;case b:i=(p-m)/864e5;break;case H:i=p/U;break;case Y:i=p/D;break;case x:i=p/y;break;default:i=p}return t?i:l.a(i)},n.daysInMonth=function(){return this.endOf(M).$D},n.$locale=function(){return F[this.$L]},n.locale=function(e,s){if(!e)return this.$L;var t=this.clone(),i=P(e,s,!0);return i&&(t.$L=i),t},n.clone=function(){return l.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},a})(),re=Q.prototype;return v.prototype=re,[["$ms",T],["$s",x],["$m",Y],["$H",H],["$W",b],["$M",M],["$y",k],["$D",O]].forEach((function(a){re[a[1]]=function(n){return this.$g(n,a[0],a[1])}})),v.extend=function(a,n){return a.$i||(a(n,Q,v),a.$i=!0),v},v.locale=P,v.isDayjs=ee,v.unix=function(a){return v(1e3*a)},v.en=F[W],v.Ls=F,v.p={},v}))})(X)),X.exports}var we=_e();const Ce=ye(we),Se="N/A";function se(K="",L="YYYY-MM-DD HH:mm:ss"){const y=Ce(K);return y.isValid()?y.format(L):Se}const be={class:"chat-list-page"},ke={class:"search-bar"},Oe={class:"search-input-wrapper"},Te={class:"tabs"},xe={key:0,class:"unread-badge"},Ye={class:"chat-list"},je={key:0,class:"loading-state"},Le=["onClick"],He={class:"avatar-wrapper"},Ie=["src"],Fe={key:0,class:"online-indicator"},Ne={key:1,class:"group-badge"},Ve={class:"chat-info"},ze={class:"chat-header"},Ae={class:"chat-name"},We={class:"chat-time"},Ee={class:"chat-content"},Ge={key:0,class:"sender-name"},Ue={class:"last-message"},Je={key:0,class:"unread-container"},qe={key:1,class:"empty-state"},Be=le({__name:"index",setup(K){$e();const L=Z(!0),y=Z(""),D=Z("all"),U=Z(!1),T=Z([]),x=ie(()=>{let h=T.value;if(D.value==="unread"?h=h.filter(r=>r.unreadCount>0):D.value==="group"&&(h=h.filter(r=>r.isGroup)),y.value.trim()){const r=y.value.toLowerCase();h=h.filter(g=>g.name.toLowerCase().includes(r)||g.lastMessage.toLowerCase().includes(r)||g.tags&&g.tags.some(S=>S.toLowerCase().includes(r)))}return h.sort((r,g)=>g.lastMessageTime.getTime()-r.lastMessageTime.getTime())}),Y=ie(()=>T.value.reduce((h,r)=>h+r.unreadCount,0));function H(){L.value=!0,setTimeout(()=>{T.value=[{id:"1",name:"小明",avatar:"https://img.yzcdn.cn/vant/cat.jpeg",lastMessage:"好的，明天见！",lastMessageTime:new Date(Date.now()-1e3*60*5),lastSender:"小明",unreadCount:2,isOnline:!0,isGroup:!1,tags:["朋友","工作"]},{id:"2",name:"项目讨论群",avatar:"https://img.yzcdn.cn/vant/apple-1.jpg",lastMessage:"我们需要在周五前完成这个任务",lastMessageTime:new Date(Date.now()-1e3*60*30),lastSender:"项目经理",unreadCount:5,isOnline:!1,isGroup:!0,memberCount:12,tags:["工作","项目"]},{id:"3",name:"小红",avatar:"https://img.yzcdn.cn/vant/apple-2.jpg",lastMessage:"谢谢分享！",lastMessageTime:new Date(Date.now()-1e3*60*60*2),lastSender:"我",unreadCount:0,isOnline:!0,isGroup:!1,tags:["朋友"]},{id:"4",name:"家庭群",avatar:"https://img.yzcdn.cn/vant/apple-3.jpg",lastMessage:"周末一起吃饭吗？",lastMessageTime:new Date(Date.now()-1e3*60*60*5),lastSender:"妈妈",unreadCount:1,isOnline:!1,isGroup:!0,memberCount:6,tags:["家人"]},{id:"5",name:"张三",avatar:"https://img.yzcdn.cn/vant/apple-4.jpg",lastMessage:"请问这个问题怎么解决？",lastMessageTime:new Date(Date.now()-1e3*60*60*24),lastSender:"张三",unreadCount:0,isOnline:!1,isGroup:!1,tags:["客户"]}],L.value=!1},1e3)}function b(h){const r=new Date,g=new Date(r.getFullYear(),r.getMonth(),r.getDate()),S=new Date(g);S.setDate(S.getDate()-1);const u=new Date(h);return u>=g?se(u,"HH:mm"):u>=S?"昨天":u.getFullYear()===r.getFullYear()?se(u,"MM-DD"):se(u,"YYYY-MM-DD")}function z(){}function M(){y.value=""}function A(h){D.value=h}function k(h){h.id;const r=T.value.findIndex(g=>g.id===h.id);r!==-1&&(T.value[r].unreadCount=0)}function O(){}function J(){U.value=window.scrollY>300}return ce(()=>{H(),window.addEventListener("scroll",J)}),de(()=>{window.removeEventListener("scroll",J)}),(h,r)=>{const g=oe("badge"),S=oe("empty");return C(),w("div",be,[d("div",{class:"nav-bar"},[r[5]||(r[5]=d("h1",{class:"nav-title"}," 消息 ",-1)),d("div",{class:"nav-actions"},[d("button",{class:"nav-btn",onClick:O},[...r[4]||(r[4]=[d("span",{class:"icon-plus"},"+",-1)])])])]),d("div",ke,[d("div",Oe,[r[6]||(r[6]=d("span",{class:"icon-search"},"🔍",-1)),fe(d("input",{"onUpdate:modelValue":r[0]||(r[0]=u=>y.value=u),type:"text",class:"search-input",placeholder:"搜索聊天",onInput:z},null,544),[[he,y.value]]),y.value?(C(),w("span",{key:0,class:"icon-clear",onClick:M},"✕")):j("",!0)])]),d("div",Te,[d("div",{class:te(["tab",[{active:D.value==="all"}]]),onClick:r[1]||(r[1]=u=>A("all"))}," 全部 ",2),d("div",{class:te(["tab",[{active:D.value==="unread"}]]),onClick:r[2]||(r[2]=u=>A("unread"))},[r[7]||(r[7]=ve(" 未读 ",-1)),Y.value>0?(C(),w("span",xe,G(Y.value),1)):j("",!0)],2),d("div",{class:te(["tab",[{active:D.value==="group"}]]),onClick:r[3]||(r[3]=u=>A("group"))}," 群聊 ",2)]),d("div",Ye,[L.value?(C(),w("div",je,[ne(me(L),{type:"spinner",color:"#1989fa"}),r[8]||(r[8]=d("span",null,"加载中...",-1))])):j("",!0),(C(!0),w(pe,null,ge(x.value,u=>(C(),w("div",{key:u.id,class:"chat-item",onClick:W=>k(u)},[d("div",He,[d("image",{src:u.avatar,class:"avatar",fit:"cover"},null,8,Ie),u.isOnline?(C(),w("div",Fe)):j("",!0),u.isGroup?(C(),w("div",Ne,G(u.memberCount),1)):j("",!0)]),d("div",Ve,[d("div",ze,[d("h3",Ae,G(u.name),1),d("span",We,G(b(u.lastMessageTime)),1)]),d("div",Ee,[u.lastSender!=="me"?(C(),w("span",Ge,G(u.lastSender)+": ",1)):j("",!0),d("span",Ue,G(u.lastMessage),1)])]),u.unreadCount>0?(C(),w("div",Je,[ne(g,{content:u.unreadCount>99?"99+":u.unreadCount,class:"unread-badge-large"},null,8,["content"])])):j("",!0)],8,Le))),128)),!L.value&&x.value.length===0?(C(),w("div",qe,[ne(S,{description:"暂无聊天记录","image-size":"100"}),d("button",{class:"create-chat-btn",onClick:O}," 开始聊天 ")])):j("",!0)]),U.value?(C(),w("div",{key:0,class:"floating-action-button",onClick:O},[...r[9]||(r[9]=[d("span",null,"+",-1)])])):j("",!0)])}}}),Qe=Me(Be,[["__scopeId","data-v-bea94cc1"]]);export{Qe as default};
