import{n as g,d as C,G as k,S as B,c as z,Y as T,a0 as M,I as N,L,z as j,a5 as q,q as h,k as U,a6 as V,a7 as D,w as G}from"./index-C329vRR8.js";import{q as H,w as v,o as Y,f as _,m as s,v as O,r as A,j as E}from"./vue-CItE1nfi.js";let f=0;function F(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[J,i]=z("toast"),K=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Q={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:g,iconSize:g,duration:B(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:C,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:C,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:g};var b=H({name:J,props:Q,emits:["update:show"],setup(e,{emit:o,slots:a}){let l,c=!1;const r=()=>{const n=e.show&&e.forbidClick;c!==n&&(c=n,F(c))},d=n=>o("update:show",n),y=()=>{e.closeOnClick&&d(!1)},u=()=>clearTimeout(l),S=()=>{const{icon:n,type:t,iconSize:w,iconPrefix:P,loadingType:I}=e;if(n||t==="success"||t==="fail")return s(N,{name:n||t,size:w,class:i("icon"),classPrefix:P},null);if(t==="loading")return s(L,{class:i("loading"),size:w,type:I},null)},x=()=>{const{type:n,message:t}=e;if(a.message)return s("div",{class:i("text")},[a.message()]);if(j(t)&&t!=="")return n==="html"?s("div",{key:0,class:i("text"),innerHTML:String(t)},null):s("div",{class:i("text")},[t])};return v(()=>[e.show,e.forbidClick],r),v(()=>[e.show,e.type,e.message,e.duration],()=>{u(),e.show&&e.duration>0&&(l=setTimeout(()=>{d(!1)},e.duration))}),Y(r),_(r),()=>s(M,O({class:[i([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:u,"onUpdate:show":d},T(e,K)),{default:()=>[S(),x()]})}});const R={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let m=[],W=!1,p=h({},R);const X=new Map;function Z(e){return U(e)?e:{message:e}}function $(){const{instance:e}=V({setup(){const o=A(""),{open:a,state:l,close:c,toggle:r}=D(),d=()=>{},y=()=>s(b,O(l,{onClosed:d,"onUpdate:show":r}),null);return v(o,u=>{l.message=u}),E().render=y,{open:a,close:c,message:o}}});return e}function ee(){if(!m.length||W){const e=$();m.push(e)}return m[m.length-1]}function ae(e={}){if(!q)return{};const o=ee(),a=Z(e);return o.open(h({},p,X.get(a.type||p.type),a)),o}G(b);export{ae as s};
