import{t as E,n as A,c as C,u as M,a as N,F as D,p as z,w as I,r as R,b as U,B as $}from"./index-C329vRR8.js";/* empty css              */import{C as K}from"./index-BEEXZNzr.js";import{F as O}from"./index-sea-VhP-.js";import{q as V,m as u,I as F,Q as g,K as j,J as P,r as G,d as H,R as w,u as f,V as J,M as Q}from"./vue-CItE1nfi.js";const[W,Y]=C("form"),L={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:A,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:E,showErrorMessage:E,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var X=V({name:W,props:L,emits:["submit","failed"],setup(a,{emit:d,slots:m}){const{children:o,linkChildren:l}=M(D),p=e=>e?o.filter(t=>e.includes(t.name)):o,_=e=>new Promise((t,n)=>{const s=[];p(e).reduce((k,q)=>k.then(()=>{if(!s.length)return q.validate().then(y=>{y&&s.push(y)})}),Promise.resolve()).then(()=>{s.length?n(s):t()})}),i=e=>new Promise((t,n)=>{const s=p(e);Promise.all(s.map(r=>r.validate())).then(r=>{r=r.filter(Boolean),r.length?n(r):t()})}),v=e=>{const t=o.find(n=>n.name===e);return t?new Promise((n,s)=>{t.validate().then(r=>{r?s(r):n()})}):Promise.reject()},h=e=>typeof e=="string"?v(e):a.validateFirst?_(e):i(e),x=e=>{typeof e=="string"&&(e=[e]),p(e).forEach(n=>{n.resetValidation()})},b=()=>o.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),c=(e,t)=>{o.some(n=>n.name===e?(n.$el.scrollIntoView(t),!0):!1)},B=()=>o.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),S=()=>{const e=B();h().then(()=>d("submit",e)).catch(t=>{d("failed",{values:e,errors:t});const{scrollToError:n,scrollToErrorPosition:s}=a;n&&t[0].name&&c(t[0].name,s?{block:s}:void 0)})},T=e=>{z(e),S()};return l({props:a}),N({submit:S,validate:h,getValues:B,scrollToField:c,resetValidation:x,getValidationStatus:b}),()=>{var e;return u("form",{class:Y(),onSubmit:T},[(e=m.default)==null?void 0:e.call(m)])}}});const Z=I(X),ee="/game-h5/favicon.png",te={"un-color-hex-969799":"","un-text-14px":"","un-fw400":""},ne=V({__name:"Description",props:{text:{default:"一个精心制作的移动端 H5 模板"}},setup(a){const d=a;return(m,o)=>(P(),F("div",null,[o[0]||(o[0]=g("h1",{"un-flex-y-center":""},[g("img",{src:ee,"un-w-38px":"","un-h-38px":""}),g("span",{"un-ml-16px":"","un-text-32px":"","un-fw400":""},"MobVue")],-1)),g("h2",te,j(d.text),1)]))}});function oe(a){return R({url:"auth/login",method:"post",data:a})}const se={"un-h-full":"","un-flex-center":"","un-flex-col":"","un-select-none":""},re={"un-mx-16px":"","un-my-32px":""},ce=V({__name:"index",setup(a){const d=Q(),m=U(),o=G(!1),l=H({username:"admin",password:"12345678"});function p(){o.value=!0,oe(l).then(({data:_})=>{m.setToken(_.token),d.push("/")}).catch(()=>{l.password=""}).finally(()=>{o.value=!1})}return(_,i)=>{const v=O,h=K,x=$,b=Z;return P(),F("div",se,[u(ne,{"un-mb-20px":""}),u(b,{onSubmit:p},{default:w(()=>[u(h,{inset:""},{default:w(()=>[u(v,{modelValue:f(l).username,"onUpdate:modelValue":i[0]||(i[0]=c=>f(l).username=c),name:"username",label:"用户名",size:"large",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),u(v,{modelValue:f(l).password,"onUpdate:modelValue":i[1]||(i[1]=c=>f(l).password=c),type:"password",name:"password",label:"密码",size:"large",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),g("div",re,[u(x,{loading:f(o),type:"primary","native-type":"submit",size:"large",round:"",block:""},{default:w(()=>[...i[2]||(i[2]=[J(" 登 录 ",-1)])]),_:1},8,["loading"])])]),_:1})])}}});export{ce as default};
